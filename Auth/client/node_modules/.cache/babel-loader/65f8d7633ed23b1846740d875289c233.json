{"ast":null,"code":"var _jsxFileName = \"/home/sowmga/Desktop/zemoso-training/Assignment-Auth/client/src/context/authContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, createContext } from \"react\";\nimport jwtDecoder from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  user: null\n};\n\nif (localStorage.getItem(\"token\")) {\n  const decodedToken = jwtDecoder(localStorage.getItem(\"token\"));\n\n  if (decodedToken.exp * 1000 < Date.now()) {\n    localStorage.removeItem(\"token\");\n  } else {\n    initialState.user = decodedToken;\n  }\n}\n\nconst AuthContext = /*#__PURE__*/createContext({\n  user: null,\n  login: userData => {},\n  logout: () => {}\n});\n\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case 'LOGIN':\n      return { ...state,\n        user: action.payload\n      };\n\n    case 'LOGOUT':\n      return { ...state,\n        user: null\n      };\n\n    default:\n      return state;\n  }\n}\n\nfunction AuthProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  const login = userData => {\n    localStorage.setItem(\"token\", userData.token);\n    dispatch({\n      type: 'LOGIN',\n      payload: userData\n    });\n  };\n\n  function logout() {\n    localStorage.removeItem(\"token\");\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user: state.user,\n      login,\n      logout\n    },\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthProvider, \"UrEkDPQH5U12xnblC9PjDJeyoVE=\");\n\n_c = AuthProvider;\nexport { AuthContext, AuthProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useReducer","createContext","jwtDecoder","initialState","user","localStorage","getItem","decodedToken","exp","Date","now","removeItem","AuthContext","login","userData","logout","authReducer","state","action","type","payload","AuthProvider","props","dispatch","setItem","token"],"sources":["/home/sowmga/Desktop/zemoso-training/Assignment-Auth/client/src/context/authContext.js"],"sourcesContent":["import React,{useReducer,createContext} from \"react\";\nimport jwtDecoder from \"jwt-decode\"\n\nconst initialState={\n    user:null\n}\n\nif(localStorage.getItem(\"token\")){\n    const decodedToken=jwtDecoder(localStorage.getItem(\"token\"))\n\n    if(decodedToken.exp*1000<Date.now()){\n        localStorage.removeItem(\"token\");\n    }\n    else{\n        initialState.user=decodedToken;\n    }\n}\n\nconst AuthContext=createContext({\n    user:null,\n    login:(userData)=>{},\n    logout:()=>{}\n})\n\nfunction authReducer(state,action){\n    switch(action.type){\n        case 'LOGIN':\n            return {\n                ...state,\n                user:action.payload\n            }\n        case 'LOGOUT':\n            return{\n                ...state,\n                user:null\n            }\n        default : return state;\n    }\n}\n\nfunction AuthProvider(props){\n    const [state,dispatch] =useReducer(authReducer,initialState)\n\n    const login =(userData)=>{\n        localStorage.setItem(\"token\",userData.token);\n        dispatch({\n            type:'LOGIN',\n            payload:userData\n        })\n    }\n\n    function logout(){\n        localStorage.removeItem(\"token\");\n        dispatch({type:\"LOGOUT\"})\n    }\n\n    return(\n        <AuthContext.Provider\n            value={{user:state.user,login,logout}}\n            {...props}\n        />\n    )\n}\n\nexport {AuthContext,AuthProvider}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,UAAd,EAAyBC,aAAzB,QAA6C,OAA7C;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAEA,MAAMC,YAAY,GAAC;EACfC,IAAI,EAAC;AADU,CAAnB;;AAIA,IAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAH,EAAiC;EAC7B,MAAMC,YAAY,GAACL,UAAU,CAACG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAA7B;;EAEA,IAAGC,YAAY,CAACC,GAAb,GAAiB,IAAjB,GAAsBC,IAAI,CAACC,GAAL,EAAzB,EAAoC;IAChCL,YAAY,CAACM,UAAb,CAAwB,OAAxB;EACH,CAFD,MAGI;IACAR,YAAY,CAACC,IAAb,GAAkBG,YAAlB;EACH;AACJ;;AAED,MAAMK,WAAW,gBAACX,aAAa,CAAC;EAC5BG,IAAI,EAAC,IADuB;EAE5BS,KAAK,EAAEC,QAAD,IAAY,CAAE,CAFQ;EAG5BC,MAAM,EAAC,MAAI,CAAE;AAHe,CAAD,CAA/B;;AAMA,SAASC,WAAT,CAAqBC,KAArB,EAA2BC,MAA3B,EAAkC;EAC9B,QAAOA,MAAM,CAACC,IAAd;IACI,KAAK,OAAL;MACI,OAAO,EACH,GAAGF,KADA;QAEHb,IAAI,EAACc,MAAM,CAACE;MAFT,CAAP;;IAIJ,KAAK,QAAL;MACI,OAAM,EACF,GAAGH,KADD;QAEFb,IAAI,EAAC;MAFH,CAAN;;IAIJ;MAAU,OAAOa,KAAP;EAXd;AAaH;;AAED,SAASI,YAAT,CAAsBC,KAAtB,EAA4B;EAAA;;EACxB,MAAM,CAACL,KAAD,EAAOM,QAAP,IAAkBvB,UAAU,CAACgB,WAAD,EAAab,YAAb,CAAlC;;EAEA,MAAMU,KAAK,GAAGC,QAAD,IAAY;IACrBT,YAAY,CAACmB,OAAb,CAAqB,OAArB,EAA6BV,QAAQ,CAACW,KAAtC;IACAF,QAAQ,CAAC;MACLJ,IAAI,EAAC,OADA;MAELC,OAAO,EAACN;IAFH,CAAD,CAAR;EAIH,CAND;;EAQA,SAASC,MAAT,GAAiB;IACbV,YAAY,CAACM,UAAb,CAAwB,OAAxB;IACAY,QAAQ,CAAC;MAACJ,IAAI,EAAC;IAAN,CAAD,CAAR;EACH;;EAED,oBACI,QAAC,WAAD,CAAa,QAAb;IACI,KAAK,EAAE;MAACf,IAAI,EAACa,KAAK,CAACb,IAAZ;MAAiBS,KAAjB;MAAuBE;IAAvB,CADX;IAAA,GAEQO;EAFR;IAAA;IAAA;IAAA;EAAA,QADJ;AAMH;;GAtBQD,Y;;KAAAA,Y;AAwBT,SAAQT,WAAR,EAAoBS,YAApB"},"metadata":{},"sourceType":"module"}